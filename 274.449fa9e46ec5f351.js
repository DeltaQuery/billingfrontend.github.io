"use strict";(self.webpackChunkschool_billing=self.webpackChunkschool_billing||[]).push([[274],{8274:(rt,g,s)=>{s.r(g),s.d(g,{StudentsModule:()=>it});var c=s(9808),N=s(520),l=s(4999),d=s(7322),p=s(7531),A=s(4847),_=s(9062),T=s(5245),r=s(3075),E=s(7423),m=s(8966),S=s(4107),h=s(1079),R=s(9270),f=s(6696),v=s(8675),D=s(4004),t=s(5e3),U=s(3108),O=s(9125),L=s(1423),M=s(508);function F(o,a){if(1&o&&(t.TgZ(0,"mat-option",53),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.CEDULA_REPRESENTANTE+" - "+e.NOMBRES_REPRESENTANTE," ")}}function q(o,a){1&o&&(t.TgZ(0,"mat-form-field",34),t.TgZ(1,"mat-label"),t._uU(2,"Fecha de Retiro"),t.qZA(),t.TgZ(3,"mat-select",54),t.TgZ(4,"mat-option",27),t._uU(5,"Septiembre"),t.qZA(),t.TgZ(6,"mat-option",36),t._uU(7,"Octubre"),t.qZA(),t.TgZ(8,"mat-option",37),t._uU(9,"Noviembre"),t.qZA(),t.TgZ(10,"mat-option",38),t._uU(11,"Diciembre"),t.qZA(),t.TgZ(12,"mat-option",39),t._uU(13,"Enero"),t.qZA(),t.TgZ(14,"mat-option",40),t._uU(15,"Febrero"),t.qZA(),t.TgZ(16,"mat-option",41),t._uU(17,"Marzo"),t.qZA(),t.TgZ(18,"mat-option",42),t._uU(19,"Abril"),t.qZA(),t.TgZ(20,"mat-option",43),t._uU(21,"Mayo"),t.qZA(),t.TgZ(22,"mat-option",44),t._uU(23,"Junio"),t.qZA(),t.TgZ(24,"mat-option",45),t._uU(25,"Julio"),t.qZA(),t.TgZ(26,"mat-option",46),t._uU(27,"Agosto"),t.qZA(),t.qZA(),t.qZA())}let C=(()=>{class o{constructor(e,n,i,u,Z,st){this.formBuilder=e,this._studentService=n,this._customerService=i,this._loginService=u,this.dialogRef=Z,this.updateData=st,this.customers=[],this.id_type="V",this.actionBtn="Guardar",this.id_for=1,this.dialogTitle="Formulario de Registro",this.customer=[]}ngOnInit(){this.getCustomers(),this.buildStudentForm(),this.filterCustomerId()}filterCustomerId(){this.filteredCustomers=this.studentForm.controls.CEDULA_REPRESENTANTE.valueChanges.pipe((0,v.O)(""),(0,D.U)(e=>e?this._filter(e):this.customers.slice()))}buildStudentForm(){this.studentForm=this.formBuilder.group({NOMBRES_ALUMNO:["",r.kI.required],APELLIDOS_ALUMNO:["",[r.kI.required]],GRADO_ALUMNO:["",r.kI.required],NIVEL_ALUMNO:[""],TIPO_ALUMNO:["V"],CEDULA_ALUMNO:["",[r.kI.pattern("^[0-9]+$")]],SEXO_ALUMNO:[""],EDAD_ALUMNO:["",[r.kI.pattern("^[0-9]+$")]],BECA_ALUMNO:["0"],DESC_ALUMNO:[0],INICIO_COBRO:["1",[r.kI.required]],FINAL_COBRO:["12",[r.kI.required]],ID_REPRESENTANTE:[null],TIPO_REPRESENTANTE:[""],CEDULA_REPRESENTANTE:["",r.kI.required],NOMBRES_REPRESENTANTE:[""],FECHA_REGISTRO:[new Date],ESTATUS:["0",[r.kI.required]],FECHA_RETIRO:["12",[r.kI.required]],REGISTRADO_POR:[this._loginService.getUsername()]})}updatedData(){if(this.updateData){let e=this.customers.find(n=>n._id==this.updateData.ID_REPRESENTANTE);this.dialogTitle="Formulario de Actualizaci\xf3n",this.actionBtn="Actualizar",this.studentForm.controls.NOMBRES_ALUMNO.setValue(this.updateData.NOMBRES_ALUMNO),this.studentForm.controls.APELLIDOS_ALUMNO.setValue(this.updateData.APELLIDOS_ALUMNO),this.studentForm.controls.GRADO_ALUMNO.setValue(this.updateData.GRADO_ALUMNO),this.studentForm.controls.NIVEL_ALUMNO.setValue(this.updateData.NIVEL_ALUMNO),this.studentForm.controls.TIPO_ALUMNO.setValue(this.updateData.TIPO_ALUMNO),this.studentForm.controls.CEDULA_ALUMNO.setValue(this.updateData.CEDULA_ALUMNO),this.studentForm.controls.SEXO_ALUMNO.setValue(this.updateData.SEXO_ALUMNO),this.studentForm.controls.EDAD_ALUMNO.setValue(this.updateData.EDAD_ALUMNO),this.studentForm.controls.DESC_ALUMNO.setValue(this.updateData.DESC_ALUMNO),this.studentForm.controls.INICIO_COBRO.setValue(this.updateData.INICIO_COBRO.toString()),this.studentForm.controls.FINAL_COBRO.setValue(this.updateData.FINAL_COBRO.toString()),this.studentForm.controls.FECHA_REGISTRO.setValue(this.updateData.FECHA_REGISTRO),this.studentForm.controls.CEDULA_REPRESENTANTE.setValue(e||{TIPO_REPRESENTANTE:"N",CEDULA_REPRESENTANTE:"No tiene representante asignado, favor asignar representante v\xe1lido"}),this.studentForm.controls.BECA_ALUMNO.setValue(0==this.updateData.BECA_ALUMNO?"0":"1"),this.studentForm.controls.ESTATUS.setValue(1==this.updateData.ESTATUS?"0":"1"),this.studentForm.controls.FECHA_RETIRO.setValue(this.updateData.FECHA_RETIRO.toString()),this.studentForm.controls.REGISTRADO_POR.setValue(this.updateData.REGISTRADO_POR)}}addStudent(){this.setLevel(),this.customer=this.studentForm.controls.CEDULA_REPRESENTANTE.value,this.studentForm.controls.ID_REPRESENTANTE.setValue(this.customer._id),this.studentForm.controls.BECA_ALUMNO.setValue("0"!=this.studentForm.controls.BECA_ALUMNO.value),this.studentForm.controls.ESTATUS.setValue("0"==this.studentForm.controls.ESTATUS.value),this.updateData?this.updateStudent():this.studentForm.valid&&this._studentService.saveStudent(this.studentForm.value).subscribe({next:()=>{alert("Alumno creado correctamente."),this.studentForm.reset(),this.dialogRef.close("save")},error:e=>{console.log(e),alert("Error encontrado al crear alumno.")}})}updateStudent(){this.studentForm.valid&&this._studentService.updateStudent(this.updateData._id,this.studentForm.value).subscribe({next:()=>{alert("Alumno actualizado exitosamente."),this.studentForm.reset(),this.dialogRef.close("update")},error:e=>{console.log(e),console.log(this.studentForm.value),alert("Error encontrado al actualizar alumno.")}})}getCustomers(){this._customerService.getCustomers().subscribe({next:e=>{this.customers=e,this.customers.sort((n,i)=>parseInt(n.CEDULA_REPRESENTANTE)-parseInt(i.CEDULA_REPRESENTANTE)),setTimeout(()=>{this.updatedData()})},error:e=>{console.log(e),alert("No ha sido posible obtener los representantes.")}})}getOptionText(e){return e?e.CEDULA_REPRESENTANTE:""}_filter(e){const n=e;return this.customers.filter(i=>i.CEDULA_REPRESENTANTE.toString().includes(n))}setLevel(){("Sala de 3"==this.studentForm.controls.GRADO_ALUMNO.value||"Sala de 4"==this.studentForm.controls.GRADO_ALUMNO.value||"Sala de 5"==this.studentForm.controls.GRADO_ALUMNO.value)&&this.studentForm.controls.NIVEL_ALUMNO.setValue("Preescolar"),("1er Grado"==this.studentForm.controls.GRADO_ALUMNO.value||"2do Grado"==this.studentForm.controls.GRADO_ALUMNO.value||"3er Grado"==this.studentForm.controls.GRADO_ALUMNO.value||"4to Grado"==this.studentForm.controls.GRADO_ALUMNO.value||"5to Grado"==this.studentForm.controls.GRADO_ALUMNO.value||"6to Grado"==this.studentForm.controls.GRADO_ALUMNO.value)&&this.studentForm.controls.NIVEL_ALUMNO.setValue("B\xe1sica"),("1er A\xf1o"==this.studentForm.controls.GRADO_ALUMNO.value||"2do A\xf1o"==this.studentForm.controls.GRADO_ALUMNO.value||"3er A\xf1o"==this.studentForm.controls.GRADO_ALUMNO.value||"4to A\xf1o"==this.studentForm.controls.GRADO_ALUMNO.value||"5to A\xf1o"==this.studentForm.controls.GRADO_ALUMNO.value)&&this.studentForm.controls.NIVEL_ALUMNO.setValue("Bachillerato")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu),t.Y36(U.V),t.Y36(O.v),t.Y36(L.N),t.Y36(m.so),t.Y36(m.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-customer-dialog"]],decls:146,vars:13,consts:[["mat-dialog-title",""],[3,"formGroup"],["mat-dialog-content",""],[1,"d-flex"],["appearance","outline",1,"typeField"],["formControlName","TIPO_ALUMNO",3,"value","valueChange"],["value","V"],["value","E"],["appearance","outline",1,"idField"],["formControlName","CEDULA_ALUMNO","matInput","","placeholder","C\xe9dula de identidad"],["appearance","outline",1,"nameField"],["formControlName","NOMBRES_ALUMNO","matInput","","placeholder","Nombres"],["formControlName","APELLIDOS_ALUMNO","matInput","","placeholder","Apellidos"],["appearance","outline",1,"gradeField"],["formControlName","GRADO_ALUMNO"],["value","Sala de 3"],["value","Sala de 4"],["value","Sala de 5"],["value","1er Grado"],["value","2do Grado"],["value","3er Grado"],["value","4to Grado"],["value","5to Grado"],["value","6to Grado"],["appearance","outline",1,"discountsField"],["formControlName","BECA_ALUMNO"],["value","0"],["value","1"],["type","number","formControlName","DESC_ALUMNO","matInput","","placeholder","Descuento expresado del 0.0 al 0.99"],["appearance","outline"],["matInput","","type","text","placeholder","Id del Representante","aria-label","Number","formControlName","CEDULA_REPRESENTANTE",3,"matAutocomplete"],["autoActiveFirstOption","",3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"shortField"],["formControlName","INICIO_COBRO"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["value","12"],["formControlName","FINAL_COBRO"],["formControlName","ESTATUS",3,"value","valueChange"],["appearance","outline","class","shortField",4,"ngIf"],["mat-dialog-action","",1,"mt-2",3,"align"],["mat-raised-button","","color","warn","mat-dialog-close","",1,"me-2"],["mat-raised-button","","color","primary",1,"",3,"disabled","click"],[3,"value"],["formControlName","FECHA_RETIRO"]],template:function(e,n){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t._UZ(2,"hr"),t.TgZ(3,"form",1),t.TgZ(4,"div",2),t.TgZ(5,"h2"),t._uU(6,"Informaci\xf3n del Alumno"),t.qZA(),t.TgZ(7,"div",3),t.TgZ(8,"mat-form-field",4),t.TgZ(9,"mat-label"),t._uU(10,"Tipo"),t.qZA(),t.TgZ(11,"mat-select",5),t.NdJ("valueChange",function(u){return n.id_type=u}),t.TgZ(12,"mat-option",6),t._uU(13,"V-"),t.qZA(),t.TgZ(14,"mat-option",7),t._uU(15,"E-"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"mat-form-field",8),t.TgZ(17,"mat-label"),t._uU(18,"C\xe9dula escolar"),t.qZA(),t._UZ(19,"input",9),t.qZA(),t.qZA(),t.TgZ(20,"div"),t.TgZ(21,"mat-form-field",10),t.TgZ(22,"mat-label"),t._uU(23,"Nombres"),t.qZA(),t._UZ(24,"input",11),t.qZA(),t.TgZ(25,"mat-form-field",10),t.TgZ(26,"mat-label"),t._uU(27,"Apellidos"),t.qZA(),t._UZ(28,"input",12),t.qZA(),t.TgZ(29,"mat-form-field",13),t.TgZ(30,"mat-label"),t._uU(31,"Grado"),t.qZA(),t.TgZ(32,"mat-select",14),t.TgZ(33,"mat-option",15),t._uU(34,"Sala de 3"),t.qZA(),t.TgZ(35,"mat-option",16),t._uU(36,"Sala de 4"),t.qZA(),t.TgZ(37,"mat-option",17),t._uU(38,"Sala de 5"),t.qZA(),t.TgZ(39,"mat-option",18),t._uU(40,"1er Grado"),t.qZA(),t.TgZ(41,"mat-option",19),t._uU(42,"2do Grado"),t.qZA(),t.TgZ(43,"mat-option",20),t._uU(44,"3er Grado"),t.qZA(),t.TgZ(45,"mat-option",21),t._uU(46,"4to Grado"),t.qZA(),t.TgZ(47,"mat-option",22),t._uU(48,"5to Grado"),t.qZA(),t.TgZ(49,"mat-option",23),t._uU(50,"6to Grado"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"div"),t.TgZ(52,"mat-form-field",24),t.TgZ(53,"mat-label"),t._uU(54,"Beca"),t.qZA(),t.TgZ(55,"mat-select",25),t.TgZ(56,"mat-option",26),t._uU(57,"No"),t.qZA(),t.TgZ(58,"mat-option",27),t._uU(59,"S\xed"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(60,"mat-form-field",24),t.TgZ(61,"mat-label"),t._uU(62,"Descuento"),t.qZA(),t._UZ(63,"input",28),t.qZA(),t.qZA(),t.TgZ(64,"mat-form-field",29),t.TgZ(65,"mat-label"),t._uU(66,"Id. Representante"),t.qZA(),t._UZ(67,"input",30),t.TgZ(68,"mat-autocomplete",31,32),t.YNc(70,F,2,2,"mat-option",33),t.ALo(71,"async"),t.qZA(),t.qZA(),t.TgZ(72,"mat-form-field",34),t.TgZ(73,"mat-label"),t._uU(74,"Inicio de Cobro"),t.qZA(),t.TgZ(75,"mat-select",35),t.TgZ(76,"mat-option",27),t._uU(77,"Septiembre"),t.qZA(),t.TgZ(78,"mat-option",36),t._uU(79,"Octubre"),t.qZA(),t.TgZ(80,"mat-option",37),t._uU(81,"Noviembre"),t.qZA(),t.TgZ(82,"mat-option",38),t._uU(83,"Diciembre"),t.qZA(),t.TgZ(84,"mat-option",39),t._uU(85,"Enero"),t.qZA(),t.TgZ(86,"mat-option",40),t._uU(87,"Febrero"),t.qZA(),t.TgZ(88,"mat-option",41),t._uU(89,"Marzo"),t.qZA(),t.TgZ(90,"mat-option",42),t._uU(91,"Abril"),t.qZA(),t.TgZ(92,"mat-option",43),t._uU(93,"Mayo"),t.qZA(),t.TgZ(94,"mat-option",44),t._uU(95,"Junio"),t.qZA(),t.TgZ(96,"mat-option",45),t._uU(97,"Julio"),t.qZA(),t.TgZ(98,"mat-option",46),t._uU(99,"Agosto"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(100,"mat-form-field",34),t.TgZ(101,"mat-label"),t._uU(102,"Fin de Cobro"),t.qZA(),t.TgZ(103,"mat-select",47),t.TgZ(104,"mat-option",27),t._uU(105,"Septiembre"),t.qZA(),t.TgZ(106,"mat-option",36),t._uU(107,"Octubre"),t.qZA(),t.TgZ(108,"mat-option",37),t._uU(109,"Noviembre"),t.qZA(),t.TgZ(110,"mat-option",38),t._uU(111,"Diciembre"),t.qZA(),t.TgZ(112,"mat-option",39),t._uU(113,"Enero"),t.qZA(),t.TgZ(114,"mat-option",40),t._uU(115,"Febrero"),t.qZA(),t.TgZ(116,"mat-option",41),t._uU(117,"Marzo"),t.qZA(),t.TgZ(118,"mat-option",42),t._uU(119,"Abril"),t.qZA(),t.TgZ(120,"mat-option",43),t._uU(121,"Mayo"),t.qZA(),t.TgZ(122,"mat-option",44),t._uU(123,"Junio"),t.qZA(),t.TgZ(124,"mat-option",45),t._uU(125,"Julio"),t.qZA(),t.TgZ(126,"mat-option",46),t._uU(127,"Agosto"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(128,"mat-form-field",34),t.TgZ(129,"mat-label"),t._uU(130,"Estatus"),t.qZA(),t.TgZ(131,"mat-select",48),t.NdJ("valueChange",function(u){return n.estatus=u}),t.TgZ(132,"mat-option",26),t._uU(133,"Activo"),t.qZA(),t.TgZ(134,"mat-option",27),t._uU(135,"Retirado"),t.qZA(),t.qZA(),t.qZA(),t.YNc(136,q,28,0,"mat-form-field",49),t.qZA(),t.qZA(),t.TgZ(137,"div",50),t.TgZ(138,"button",51),t.TgZ(139,"mat-icon"),t._uU(140,"close"),t.qZA(),t._uU(141," Cerrar"),t.qZA(),t.TgZ(142,"button",52),t.NdJ("click",function(){return n.addStudent()}),t.TgZ(143,"mat-icon"),t._uU(144,"save"),t.qZA(),t._uU(145),t.qZA(),t.qZA()),2&e){const i=t.MAs(69);t.xp6(1),t.hij(" ",n.dialogTitle," "),t.xp6(2),t.Q6J("formGroup",n.studentForm),t.xp6(8),t.Q6J("value",n.id_type),t.xp6(56),t.Q6J("matAutocomplete",i),t.xp6(1),t.Q6J("displayWith",n.getOptionText),t.xp6(2),t.Q6J("ngForOf",t.lcZ(71,11,n.filteredCustomers)),t.xp6(61),t.Q6J("value",n.estatus),t.xp6(5),t.Q6J("ngIf","1"==n.estatus),t.xp6(1),t.Q6J("align","end"),t.xp6(5),t.Q6J("disabled",!n.studentForm.valid),t.xp6(3),t.hij(" ",n.actionBtn," ")}},directives:[m.uh,r._Y,r.JL,r.sg,m.xY,d.KE,d.hX,S.gD,r.JJ,r.u,M.ey,r.Fj,p.Nt,r.wV,h.ZL,h.XC,c.sg,c.O5,E.lW,m.ZT,T.Hw],pipes:[c.Ov],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.typeField[_ngcontent-%COMP%]{width:20%}.nameField[_ngcontent-%COMP%]{width:36%}.gradeField[_ngcontent-%COMP%]{width:28%}.discountsField[_ngcontent-%COMP%]{width:50%}.idField[_ngcontent-%COMP%]{width:80%}.shortField[_ngcontent-%COMP%]{width:50%}button[_ngcontent-%COMP%]{height:50px}"]}),o})();var I=s(7125),b=s(4973),P=s(6129);function x(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().cleanFilter()}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}function B(o,a){1&o&&(t.TgZ(0,"th",29),t._uU(1," Grado "),t.qZA())}function G(o,a){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.GRADO_ALUMNO," ")}}function y(o,a){1&o&&(t.TgZ(0,"th",31),t._uU(1," Nombres "),t.qZA())}function V(o,a){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.NOMBRES_ALUMNO," ")}}function J(o,a){1&o&&(t.TgZ(0,"th",32),t._uU(1," Apellidos "),t.qZA())}function Y(o,a){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.APELLIDOS_ALUMNO," ")}}function Q(o,a){1&o&&(t.TgZ(0,"th",33),t._uU(1," C\xe9dula de Representante "),t.qZA())}function H(o,a){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.TIPO_REPRESENTANTE+"-"+e.CEDULA_REPRESENTANTE," ")}}function w(o,a){1&o&&(t.TgZ(0,"th",34),t._uU(1," Nombre de Representante "),t.qZA())}function z(o,a){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.NOMBRES_REPRESENTANTE," ")}}function j(o,a){1&o&&(t.TgZ(0,"th",35),t._uU(1,"Estatus "),t.qZA())}function k(o,a){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"estatusPipe"),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.ESTATUS)," ")}}function X(o,a){1&o&&(t.TgZ(0,"th",36),t._uU(1," Acciones "),t.qZA())}function $(o,a){1&o&&t._UZ(0,"mat-header-cell")}function W(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",30),t.TgZ(1,"button",37),t.NdJ("click",function(){const u=t.CHM(e).$implicit;return t.oxw().updateStudent(u)}),t.TgZ(2,"mat-icon"),t._uU(3,"launch"),t.qZA(),t.qZA(),t.TgZ(4,"button",38),t.NdJ("click",function(){const u=t.CHM(e).$implicit;return t.oxw().deleteStudent(u._id)}),t.TgZ(5,"mat-icon"),t._uU(6,"delete_outline"),t.qZA(),t.qZA(),t.qZA()}}function K(o,a){1&o&&t._UZ(0,"tr",39)}function tt(o,a){1&o&&t._UZ(0,"tr",40)}const et=function(){return[8,20,30,40,1e4]},ot=[{path:"",children:[{path:"",component:(()=>{class o{constructor(e,n,i,u){this._studentService=e,this._customerService=n,this.dialog=i,this._titleService=u,this.displayedColumns=["grado_alumno","nombres_alumno","apellidos_alumno","cedula_representante","nombres_representante","ESTATUS","actions"],this.dataSource=new l.by(this.students)}ngOnInit(){this.getStudents(),setTimeout(()=>{this._titleService.titleName="Alumnos"})}getStudents(){this._studentService.getStudents().subscribe({next:e=>{this.students=e,this.getCustomers()},error:e=>{console.log(e)}})}getCustomers(){this._customerService.getCustomers().subscribe({next:e=>{this.customers=e,this.addCustomerData()},error:e=>{console.log(e)}})}addCustomerData(){for(let e of this.students){let n=this.customers.find(i=>i._id==e.ID_REPRESENTANTE);if(n)e.TIPO_REPRESENTANTE=n.TIPO_REPRESENTANTE,e.CEDULA_REPRESENTANTE=n.CEDULA_REPRESENTANTE,e.NOMBRES_REPRESENTANTE=n.NOMBRES_REPRESENTANTE,e.CORREO_REPRESENTANTE=n.CORREO_REPRESENTANTE,e.TELEFONO_REPRESENTANTE=n.TELEFONO_REPRESENTANTE,e.DIRECCION_REPRESENTANTE=n.DIRECCION_REPRESENTANTE;else{let i="N/A";e.TIPO_REPRESENTANTE=i,e.CEDULA_REPRESENTANTE=i,e.NOMBRES_REPRESENTANTE=i,e.CORREO_REPRESENTANTE=i,e.TELEFONO_REPRESENTANTE=i,e.DIRECCION_REPRESENTANTE=i}}this.addDataTable()}addDataTable(){this.dataSource=new l.by(this.students),setTimeout(()=>{this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}updateStudent(e){this.dialog.open(C,{width:"600px",data:e}).afterClosed().subscribe(n=>{"update"===n&&this.getStudents()})}deleteStudent(e){this._studentService.deleteStudent(e).subscribe({next:n=>{alert("Alumno eliminado exitosamente."),this.getStudents()},error:n=>{console.log(n),alert("Ocurri\xf3 un error que impidi\xf3 eliminar al alumno.")}})}openDialog(){this.dialog.open(C,{width:"600px"}).afterClosed().subscribe(e=>{"save"===e&&this.getStudents()})}applyFilter(){this.dataSource.filter=this.searchKey.trim().toLowerCase()}cleanFilter(){this.searchKey="",this.applyFilter()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.V),t.Y36(O.v),t.Y36(m.uw),t.Y36(I.Z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-students"]],viewQuery:function(e,n){if(1&e&&(t.Gf(A.YE,5),t.Gf(_.NW,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.sort=i.first),t.iGM(i=t.CRH())&&(n.paginator=i.first)}},decls:39,vars:8,consts:[["id","principalBar",1,"container-fluid","d-flex","justify-content-between"],[1,"d-flex"],["mat-raised-button","",1,"create-btn",3,"click"],["appearance","fill","floatLabel","never",1,"search-form-field","me-4"],["matInput","","type","text",3,"ngModel","keyup","ngModelChange"],["matSuffix","","mat-icon-button","","aria-label","Limpiar",3,"click",4,"ngIf"],["id","action-buttons"],[1,"action-button"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","grado_alumno"],["mat-header-cell","","mat-sort-header","GRADO_ALUMNO",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombres_alumno"],["mat-header-cell","","mat-sort-header","NOMBRES_ALUMNO",4,"matHeaderCellDef"],["matColumnDef","apellidos_alumno"],["mat-header-cell","","mat-sort-header","APELLIDOS_ALUMNO",4,"matHeaderCellDef"],["matColumnDef","cedula_representante"],["mat-header-cell","","mat-sort-header","CEDULA_REPRESENTANTE",4,"matHeaderCellDef"],["matColumnDef","nombres_representante"],["mat-header-cell","","mat-sort-header","NOMBRES_REPRESENTANTE",4,"matHeaderCellDef"],["matColumnDef","ESTATUS"],["mat-header-cell","","mat-sort-header","ESTATUS",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],[4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["matSuffix","","mat-icon-button","","aria-label","Limpiar",3,"click"],["mat-header-cell","","mat-sort-header","GRADO_ALUMNO"],["mat-cell",""],["mat-header-cell","","mat-sort-header","NOMBRES_ALUMNO"],["mat-header-cell","","mat-sort-header","APELLIDOS_ALUMNO"],["mat-header-cell","","mat-sort-header","CEDULA_REPRESENTANTE"],["mat-header-cell","","mat-sort-header","NOMBRES_REPRESENTANTE"],["mat-header-cell","","mat-sort-header","ESTATUS"],["mat-header-cell","","mat-sort-header",""],["mat-icon-button","",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return n.openDialog()}),t.TgZ(3,"mat-icon"),t._uU(4,"add"),t.qZA(),t._uU(5,"Nuevo "),t.qZA(),t.TgZ(6,"mat-form-field",3),t.TgZ(7,"mat-label"),t._uU(8,"Filtrar"),t.qZA(),t.TgZ(9,"input",4),t.NdJ("keyup",function(){return n.applyFilter()})("ngModelChange",function(u){return n.searchKey=u}),t.qZA(),t.YNc(10,x,3,0,"button",5),t.qZA(),t.qZA(),t.TgZ(11,"div",6),t._UZ(12,"app-return-button",7),t.qZA(),t.qZA(),t.TgZ(13,"table",8),t.ynx(14,9),t.YNc(15,B,2,0,"th",10),t.YNc(16,G,2,1,"td",11),t.BQk(),t.ynx(17,12),t.YNc(18,y,2,0,"th",13),t.YNc(19,V,2,1,"td",11),t.BQk(),t.ynx(20,14),t.YNc(21,J,2,0,"th",15),t.YNc(22,Y,2,1,"td",11),t.BQk(),t.ynx(23,16),t.YNc(24,Q,2,0,"th",17),t.YNc(25,H,2,1,"td",11),t.BQk(),t.ynx(26,18),t.YNc(27,w,2,0,"th",19),t.YNc(28,z,2,1,"td",11),t.BQk(),t.ynx(29,20),t.YNc(30,j,2,0,"th",21),t.YNc(31,k,3,3,"td",11),t.BQk(),t.ynx(32,22),t.YNc(33,X,2,0,"th",23),t.YNc(34,$,1,0,"mat-header-cell",24),t.YNc(35,W,7,0,"td",11),t.BQk(),t.YNc(36,K,1,0,"tr",25),t.YNc(37,tt,1,0,"tr",26),t.qZA(),t._UZ(38,"mat-paginator",27)),2&e&&(t.xp6(9),t.Q6J("ngModel",n.searchKey),t.xp6(1),t.Q6J("ngIf",n.searchKey),t.xp6(3),t.Q6J("dataSource",n.dataSource),t.xp6(23),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(7,et))("pageSize",8))},directives:[E.lW,T.Hw,d.KE,d.hX,p.Nt,r.Fj,r.JJ,r.On,c.O5,d.R9,b.c,l.BZ,A.YE,l.w1,l.fO,l.ge,A.nU,l.Dz,l.ev,l.as,l.XQ,l.nj,l.Gk,_.NW],pipes:[P.f],styles:["#principalBar[_ngcontent-%COMP%]{margin-top:2px;margin-bottom:1px}button[_ngcontent-%COMP%]{height:50px;margin-top:.3em!important}mat-form-field[_ngcontent-%COMP%]{width:200px;margin-top:.3em!important}#action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .action-button[_ngcontent-%COMP%]{margin-top:.3em!important;height:50px;margin-left:20px}#action-buttons[_ngcontent-%COMP%]{margin-top:4px}table[_ngcontent-%COMP%]{width:100%}"]}),o})()},{path:"**",redirectTo:"alumnos"}]}];let nt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.Bz.forChild(ot)],f.Bz]}),o})();var at=s(8413);let it=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[{provide:N.TP,useClass:at.W,multi:!0}],imports:[[c.ez,nt,l.p0,d.lN,p.c,A.JX,_.TU,T.Ps,r.u5,E.ot,N.JF,m.Is,S.LD,r.UX,h.Bb,R.I]]}),o})()}}]);